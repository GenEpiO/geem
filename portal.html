<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head profile="http://www.w3.org/2005/10/profile">
    <link rel="icon" type="image/ico" href="favicon.ico">
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genomic Epidemiology Entity Mart Prototype</title>
    <link rel="stylesheet" href="css/foundation.min.css">
    <link rel="stylesheet" href="css/foundation-icons/foundation-icons.css">
    <link rel="stylesheet" href="css/foundation-datepicker.min.css">
    <link rel="stylesheet" href="js/chosen/chosen.css">
    <link rel="stylesheet" href="css/app.css">
  </head>
  <body>
    <div class="row" style="background-color:#2199e8;color:white">
      <div class="large-10 medium-10 columns text-center">
        <!-- LOGIN / LOGOUT -->
        <h2>Genomic Epidemiology Entity Mart Prototype</h2>
        <i>This development site is tested with Google Chrome v. 62; other browsers will be supported in the future.</i>
      </div>
      <div class="large-2 medium-2 columns">
        <a class="button" href="https://github.com/GenEpiO/geem/wiki" target="_blank">Help</a>
        <a class="button" onclick="alert('Coming soon!');return false">Login</a>
        <!-- i class="fi-widget large">&nbsp;</i -->
      </div>
    </div>
    <br/>
    <div class="row">

      <!-- ************************ ONTOLOGY MENU AND SEARCH ********************* -->
      <div class="large-5 medium-5 columns" id="sidebar">

      <!-- data-options="scroll_to_content: false" data-options="deep_linking:true" -->
        <ul class="tabs" data-tabs id="entity-tabs" >
          <li class="tabs-title is-active"><a href="#panelLibrary" aria-selected="true">Library</a></li>
          <li class="tabs-title"><a href="#panelEntities">Browse</a></li>
          <li class="tabs-title"><a href="#panelSearch">Search</a></li>
        </ul>

        <div id="selectSpecificationWrapper">
          <select id="selectSpecification" style="margin:0">

            <optgroup label="Ontologies">
              <option value="data/ontology/genepio-merged.json" selected="selected">Genomic Epidemiology Ontology (GenEpiO)</option>
              <option value="data/ontology/test.epi.json">Draft Epi Form</option>
              <option value="data/ontology/foodon-edit.json" disabled>Food Ontology (FoodOn)</option>
            </optgroup>

            <optgroup label="Shared Packages">
              <option value="data/shared_packages/package_2_ui.json" disabled>Coming soon!<i class="fi-folder"></i></option>
            </optgroup>

            <optgroup label="My Packages (login required)">
              <option value="" disabled>Coming soon!</option>
              <!-- option value="data/user_packages/package_1_ui.json" disabled>My Example Package</option -->
            </optgroup>
          </select>
        </div>

        <div id="tabsNavigation" class="tabs-content" data-tabs-content="entity-tabs"> 
          
          <!-- ******************* SPECIFICATION MENU ******************* -->
          <div class="tabs-panel is-active" id="panelLibrary" style="padding:0">
            
            <div class="infoBox" style="padding:10px">
              <p>Details about a selected ontology or package are shown here.
              All other tabs focus on the selected resource.</p>
              <p>Browsing, searching and shopping for terms can only 
              involve one version of an ontology or package at a time.</p>

              <p>Coming soon: logged-in users will see a list of their downloadable packages 
              in the "My Packages" section.</p> 
            </div>

            <!-- ul class="tabs" data-tabs id="package-tabs">
              <li class="tabs-title is-active"><a href="#package-view"><i class="icon fi-magnifying-glass"></i><span>view</span></a></li>
              <li class="tabs-title"><a href="#package-edit"><i class="icon fi-pencil"></i><span>edit</span></a></li>
              <li class="tabs-title"><a href="#package-download"><i class="icon fi-download"></i><span>download</span></a></li>
              <li class="tabs-title"><a href="#package-delete"><i class="icon fi-trash"></i><span>delete</span></a></li>
              <li class="tabs-title"><a href="#package-upgrade"><i class="icon fi-plus"></i><span>upgrade</span></a></li>
            </ul>

            <div class="tabs-content" data-tabs-content="package-tabs">
              <div class="tabs-panel is-active" id="package-view">
                <a>My example download package</a>
                <p>This is a description about my package.  It has so many interesting standards and
                 other numeric and categorical variables in it!<br/>
                Ontologies: GenEpio v0.3.1</p>
              </div>
              <div class="tabs-panel" id="package-edit"></div>
              <div class="tabs-panel" id="package-download"></div>
              <div class="tabs-panel" id="package-delete"></div>
              <div class="tabs-panel" id="package-upgrade"></div>
            </div -->


          </div>


          <!-- ******************* ENTITY MENU ********************* -->
          <div class="tabs-panel" id="panelEntities" style="padding:0">
            
          </div>

          <!-- ************************ SEARCH ********************* -->
          <div class="tabs-panel" id="panelSearch">
            <form data-abide="" novalidate="novalidate" lpformnum="2">
              <div class="input-group">
                <input id="searchField" class="input-group-field" type="text" placeholder="Search for a term (3 characters or more)">

               <div class="switch tiny" style="float:left;margin-right:10px;">
                  <input class="switch-input" id="toggleSearchDefinition" type="checkbox" name="toggleSearchDefinition">
                  <label class="switch-paddle" for="toggleSearchDefinition">
                    <span class="show-for-sr">Search definitions?</span>
                  </label>
                </div>
                <label class="left" for="toggleSearchDefinition">Search definitions?</label>
              </div>
            </form> 
            
            <form id="searchResults" style=""></form>

          </div>

        </div>

        <br/>
       
      </div>

      <!-- ************************ CONTENT AREA ********************* -->
      <div class="large-6 medium-6 columns" style="padding:0;margin:0">
        <ul class="tabs" data-tabs id="content-tabs">
          <li class="tabs-title is-active"><a href="#content" aria-selected="true">Form View</a></li>
          <li class="tabs-title"><a href="#panelDataSpecification">Specification</a></li>
          <li class="tabs-title"><a href="#panelDiscuss">Discuss</a></li>
          <li class="tabs-title"><a href="#panelCart">Cart<i class="fi-shopping-cart" id="shoppingCartIcon"></i> &nbsp; </a></li>
        </ul>

        <div id="formEntityLabelWrapper">
          <div id="formEntityLabel"></div>
        </div>

        <div id="tabsContent" class="tabs-content" data-tabs-content="content-tabs"> 
          <!-- ************************* FORM VIEW ******************* -->
          <div class="tabs-panel is-active" id="content" style="padding-top:0">
            <form id="mainForm" data-abide="ajax">
              <div class="infoBox">
                Select an ontology or package in the Library tab, and then use the Browse or Search menu to see how an entity or part would be presented as a form.
              </div>
            </form>

            <!-- ************************* FORM CONTROLS ******************* -->
            <div class="container" style="border-top:1px dotted silver;padding:10px">

              <div class="row">
                <div class="switch tiny" style="float:left;margin-right:10px">
                  <input class="switch-input" id="toggleIdVisibility" type="checkbox" name="toggleIdVisibility">
                  <label class="switch-paddle" for="toggleIdVisibility">
                    <span class="show-for-sr">Toggle ontology detail view</span>
                  </label>
                </div>
                <label class="left" for="toggleIdVisibility">Toggle ontology details</label>
              </div>

              <div class="row">
                <div class="switch tiny" style="float:left;margin-right:10px">
                  <input class="switch-input" id="toggleMinimalForm" type="checkbox" name="toggleMinimalForm">
                  <label class="switch-paddle" for="toggleMinimalForm">
                    <span class="show-for-sr">Minimize form view</span>
                  </label>
                </div>
                <label class="left" for="toggleMinimalForm">Minimize form view (empty optional items are collapsed)</label>
              </div>

              <div class="row" style="font-size:.9rem">
                Legend: <div style="display:inline-block;vertical-align:top">
                  <i class="fi-shopping-cart include"></i> click to add item and its descendants to shopping cart<br/>
                  <i class="fi-shopping-cart exclude"></i> click to filter out descendant<br/>
                  <i class="fi-magnifying-glass" style="color:lightblue"></i> see ontology details for item<br/>
                  <input required size="2" style="height:15px;border-radius: 4px;" onclick="blur()" /> field requires a value
                </div>
              </div>

            </div>
          </div>

          <!-- ******************* DATA SPECIFICATION **************** -->
          <div class="tabs-panel" id="panelDataSpecification">
            <div class="input-group">
            <select id="specificationType" class="input-group-field">
              <option value="">Select a specification format to view or download</option>

              <option value="form_core_nodes.tsv">GEEM core nodes .tsv</option>
              <option value="form_core_edges.tsv">GEEM core edges .tsv</option>

              <option value="form_all_nodes.tsv">GEEM all nodes .tsv</option>
              <option value="form_all_edges.tsv">GEEM all edges .tsv</option>

              <option value="raw.json">GEEM raw.json</option>
              <option value="raw.yml">GEEM raw.yaml</option>

              <option value="form.json">GEEM form.json</option>
              <option value="form.yml">GEEM form.yaml</option>

              <!-- option value="form.html">GEEM form.html</option -->
              <option value="form_submission.json">GEEM form submission</option>

              <optiongroup>
                <option value="" disabled="disabled">Coming in 2018!</option>
                <option value="spreadsheet.xlsm"> ... Microsoft Excel</option>
                <option value="redcap.tsv"> ... RedCap</option>
                <option value="ontofox.txt"> ... OntoFox</option>
              </optiongroup>

            </select>

            <div class="input-group-label" style="padding:0">
              <button id="spec_download" class="button icon fi-download disabled" title="download" style="margin:0;border:0;cursor:pointer"> Download</button>
              <a id="view_spec_download" download="this_will_be_renamed.txt" href="data:application/octet-stream;charset=utf-8;base64,Zm9vIGJhcg==" style="visibility:hidden"></a>
            </div>


          </div>

          <pre id="dataSpecification" class="callout hide"></pre>

          <div id="helpDataSpecification" class="infoBox">
            Here a selected ontology or package specfication can be viewed and downloaded as a full list of entities, their fields, picklists and unit components.  This is available in tabular, JSON, and YAM formats, or (soon) as a Microsoft Excel template.
          </div>
          <!-- The YAML view is provided as a flat format in which many items have links to others; while the YAML-tree view is more like the HTML form view, in which hierarchic items are built out. -->

        </div>

        <!-- ******************* DISCUSSION **************** -->
        <div class="tabs-panel" id="panelDiscuss">
          
          <div class="infoBox">
            <p>Discussion about a selected ontology term (the top-level one
            shown in the Form View) occurs here.  One can select a term by
            browsing or searching, or from the shopping cart.</p>
            <!-- p>(You can also use a browser extension like Chrome Annotary to add comments to share between a review group.)</p -->
          </div>

        </div>

        <!-- ********************** SHOPPING CART ******************* -->
        <div class="tabs-panel" id="panelCart">
          <div style="padding-right:16px">
            <a href="#" id="shoppingCartTrash" class="icon fi-trash" title="empty the cart"></a>
            <button class="button" data-toggle="makePackageForm" disabled>make package</button>
          </div>
          <form id="shoppingCart" class="callout" style="clear:both"></form>

          <div class="infoBox">Your entity shopping cart is displayed here. You can convert it into a downloadable package.</div>

          <div class="row">
            
            <div class="dropdown-pane top" id="makePackageForm" data-dropdown data-hover="true" data-hover-pane="true"  data-auto-focus="true">
              <div class="input-group" >
                <label>Package Name</label>
                <input name="name" class="input-group-field" type="text" placeholder="Enter name of new package" pattern="alpha" />
                <label>Description</label>
                <input name="description" class="input-group-field" type="text" placeholder="Enter Description" pattern="alpha" />
                <button id="makePackageButton" class="button" type="submit">submit</button>
              </div>
            </div>
          </div>

          <div style="font-size:.8rem;clear:both">
            <i>Click on an item to see its form view.  Click on an item's cart to filter or remove it.</i>
            <br/>
            Legend: <div style="display:inline-block;vertical-align:top">
              <i class="fi-shopping-cart include"></i> item and its descendants are included<br/>
              <i class="fi-shopping-cart exclude"></i> descendant is filtered out<br/>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row footer">
      <div class="large-12 columns text-center">
        <p>Produced by the <a href="www.irida.ca" target="_blank">IRIDA project</a> and <a href="https://github.com/Public-Health-Bioinformatics" target="_blank">Public Health Bioinformatics</a> in conjunction with the <a href="https://github.com/GenEpiO/genepio/wiki" target="_blank">GenEpiO Consortium</a></p>
      </div>
    </div>

    <div id="modalEntity" class="reveal" data-reveal>
      <button class="close-button medium" data-close aria-label="Close reveal" type="button" style="position:absolute;right:20px;top:20px;background-color:silver">
        <span aria-hidden="true">&times;</span>
      </button>
      <div id="modalEntityHeader"></div> 
      <div id="modalEntityContentContainer"></div>
    </div>

    <script src="js/vendor/jquery.js"></script>
    <script src="js/vendor/what-input.js"></script>
    <script src="js/vendor/foundation.min.js"></script>
    <script src="js/vendor/foundation-datepicker.min.js"></script>
    <!-- script src="js/vendor/yaml.js"></script --> <!-- https://github.com/jeremyfa/yaml.js -->
    <script src="js/vendor/js-yaml.min.js"></script> <!-- http://adilapapaya.com/docs/js-yaml/readme_2.0.5.html#bundledyamllibraryforbrowsers -->
    <script src="js/chosen/chosen.jquery.min.js" type="text/javascript"></script>
    <script src="js/geem_form.js"></script>
    <script src="js/geem_specifications.js"></script>
    <script src="js/geem_app.js"></script>

  </body>

</html>
